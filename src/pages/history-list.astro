---
// Prerender so the page is precached for offline (PWA). History list shows "adowanie..."
// until client hydrates and reads localStorage, so server and client initial output match.
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import HistoryPage from "../components/History";
import ArrowLeftSimpleIcon from "../assets/icons/arrow-left-simple.svg?url";
import { cn } from "@/lib/utils";
import { buttonVariants } from "../components/ui/button";

const description = "Przegld zapisanych rozm贸w z korepetytorem AI. Wr贸 do swoich poprzednich sesji nauki.";
const keywords = "historia rozm贸w, zapisane sesje, przegld nauki, postpy";
---

<Layout title="Historia Rozm贸w - Tutor AI" description={description} keywords={keywords}>
  <div class="sr-only">
    <h1>Historia twoich rozm贸w z korepetytorem AI</h1>
    <p>Przegldaj zapisane sesje nauki i wracaj do poprzednich rozm贸w.</p>
  </div>
  <div
    class="min-h-dvh bg-background flex flex-col p-4 md:p-6 max-w-3xl mx-auto overflow-y-auto"
    style="padding-bottom: max(1.5rem, env(safe-area-inset-bottom, 1.5rem));"
    suppress-hydration-warning
  >
    {/* Header */}
    <div class="text-center mb-10 mt-4 animate-in fade-in slide-in-from-top-4 duration-700">
      <div class="text-4xl mb-4"></div>
      <h1 class="text-3xl font-bold text-foreground mb-2 tracking-tight">
        Twoje <span class="text-primary">rozmowy</span>
      </h1>
      <p class="text-base text-muted-foreground">Przejrzyj swoje sesje nauki</p>
    </div>

    <HistoryPage client:idle />

    {/* Back button */}
    <div class="flex justify-center pb-6 pb-safe shrink-0">
      <a href="/" class={cn(buttonVariants({ variant: "back" }), "text-sm px-4 py-2 md:text-base md:px-6 md:py-3")}>
        <img src={ArrowLeftSimpleIcon} alt="" width={20} height={20} class="w-5 h-5" aria-hidden="true" />
        Strona g贸wna
      </a>
    </div>
  </div>
</Layout>
